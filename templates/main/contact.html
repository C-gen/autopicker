{% extends 'base.html' %}

{% block title %}Контакты - Автоподбор автомобилей{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">Контакты</h1>
                <p class="lead mb-4">
                    Свяжитесь с нами любым удобным способом. Мы всегда готовы помочь 
                    в выборе идеального автомобиля.
                </p>
            </div>
            <div class="col-lg-6 text-center">
                <div class="position-relative">
                    <i class="fas fa-address-book" style="font-size: 15rem; opacity: 0.1;"></i>
                    <div class="position-absolute top-50 start-50 translate-middle">
                        <i class="fas fa-phone" style="font-size: 3rem; color: var(--accent-color);"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Info Section -->
<section class="section-padding">
    <div class="container">
        <div class="row g-5">
            <!-- Contact Form -->
            <div class="col-lg-8">
                <div class="card shadow">
                    <div class="card-body p-5">
                        <h2 class="h3 fw-bold mb-4">Напишите нам</h2>
                        <p class="text-muted mb-4">
                            Заполните форму ниже, и мы свяжемся с вами в ближайшее время
                        </p>
                        
                        <form method="post">
                            {% csrf_token %}
                            
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="{{ form.name.id_for_label }}" class="form-label">
                                        <i class="fas fa-user me-2"></i>Ваше имя *
                                    </label>
                                    {{ form.name }}
                                    {% if form.name.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.name.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="{{ form.email.id_for_label }}" class="form-label">
                                        <i class="fas fa-envelope me-2"></i>Email *
                                    </label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.email.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="col-12">
                                    <label for="{{ form.subject.id_for_label }}" class="form-label">
                                        <i class="fas fa-tag me-2"></i>Тема сообщения *
                                    </label>
                                    {{ form.subject }}
                                    {% if form.subject.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.subject.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="col-12">
                                    <label for="{{ form.message.id_for_label }}" class="form-label">
                                        <i class="fas fa-comment me-2"></i>Сообщение *
                                    </label>
                                    {{ form.message }}
                                    {% if form.message.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.message.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-paper-plane me-2"></i>Отправить сообщение
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Contact Info -->
            <div class="col-lg-4">
                <div class="card h-100">
                    <div class="card-body p-4">
                        <h3 class="h4 fw-bold mb-4">Контактная информация</h3>
                        
                        {% if site_settings.phone %}
                        <div class="d-flex align-items-start mb-4">
                            <div class="flex-shrink-0">
                                <i class="fas fa-phone text-primary" style="font-size: 1.5rem;"></i>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h6 class="fw-bold mb-1">Телефон</h6>
                                <p class="mb-0">
                                    <a href="tel:{{ site_settings.phone }}" class="text-decoration-none">
                                        {{ site_settings.phone }}
                                    </a>
                                </p>
                                <small class="text-muted">Звоните в любое время</small>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if site_settings.email %}
                        <div class="d-flex align-items-start mb-4">
                            <div class="flex-shrink-0">
                                <i class="fas fa-envelope text-primary" style="font-size: 1.5rem;"></i>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h6 class="fw-bold mb-1">Email</h6>
                                <p class="mb-0">
                                    <a href="mailto:{{ site_settings.email }}" class="text-decoration-none">
                                        {{ site_settings.email }}
                                    </a>
                                </p>
                                <small class="text-muted">Ответим в течение дня</small>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if site_settings.telegram %}
                        <div class="d-flex align-items-start mb-4">
                            <div class="flex-shrink-0">
                                <i class="fab fa-telegram text-primary" style="font-size: 1.5rem;"></i>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h6 class="fw-bold mb-1">Telegram</h6>
                                <p class="mb-0">
                                    <a href="https://t.me/{{ site_settings.telegram }}" target="_blank" class="text-decoration-none">
                                        @{{ site_settings.telegram }}
                                    </a>
                                </p>
                                <small class="text-muted">Быстрые сообщения</small>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if site_settings.whatsapp %}
                        <div class="d-flex align-items-start mb-4">
                            <div class="flex-shrink-0">
                                <i class="fab fa-whatsapp text-primary" style="font-size: 1.5rem;"></i>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h6 class="fw-bold mb-1">WhatsApp</h6>
                                <p class="mb-0">
                                    <a href="https://wa.me/{{ site_settings.whatsapp }}" target="_blank" class="text-decoration-none">
                                        {{ site_settings.whatsapp }}
                                    </a>
                                </p>
                                <small class="text-muted">Удобное общение</small>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if site_settings.address %}
                        <div class="d-flex align-items-start mb-4">
                            <div class="flex-shrink-0">
                                <i class="fas fa-map-marker-alt text-primary" style="font-size: 1.5rem;"></i>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h6 class="fw-bold mb-1">Адрес</h6>
                                <p class="mb-0">{{ site_settings.address }}</p>
                                <small class="text-muted">Работаем по всему городу</small>
                            </div>
                        </div>
                        {% endif %}
                        
                        <hr class="my-4">
                        
                        <h6 class="fw-bold mb-3">Время работы</h6>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Понедельник - Пятница</span>
                            <span class="fw-bold">9:00 - 20:00</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Суббота</span>
                            <span class="fw-bold">10:00 - 18:00</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Воскресенье</span>
                            <span class="fw-bold">10:00 - 16:00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Map Section -->
<section class="section-padding bg-light">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-lg-8 mx-auto">
                <h2 class="display-6 fw-bold mb-3">Мы на карте</h2>
                <p class="lead text-muted">
                    Работаем по всему городу и области
                </p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body p-0">
                        <div id="map" style="height: 400px; width: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="section-padding">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-lg-8 mx-auto">
                <h2 class="display-6 fw-bold mb-3">Часто задаваемые вопросы</h2>
                <p class="lead text-muted">
                    Ответы на популярные вопросы
                </p>
            </div>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="accordion" id="faqAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faq1">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                                Сколько времени занимает подбор автомобиля?
                            </button>
                        </h2>
                        <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Время подбора зависит от ваших требований и доступности автомобилей на рынке. 
                                Обычно базовый подбор занимает 5-7 дней, расширенный - 7-10 дней, 
                                а премиум подбор - 10-14 дней.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faq2">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                                Какие документы нужны для работы с вами?
                            </button>
                        </h2>
                        <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Для начала работы нам нужны только ваши контактные данные и требования к автомобилю. 
                                Паспорт и другие документы понадобятся только при оформлении покупки.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faq3">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                                Вы работаете только с новыми автомобилями?
                            </button>
                        </h2>
                        <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Нет, мы работаем как с новыми, так и с подержанными автомобилями. 
                                Мы подберем для вас лучший вариант в рамках вашего бюджета и требований.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faq4">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4">
                                Предоставляете ли вы гарантию на подобранные автомобили?
                            </button>
                        </h2>
                        <div id="collapse4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Да, мы предоставляем гарантию на качество нашей работы. 
                                Если в течение 30 дней после покупки обнаружатся скрытые дефекты, 
                                которые мы не выявили при проверке, мы компенсируем ремонт.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="section-padding bg-primary text-white">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-8 mx-auto">
                <h2 class="display-5 fw-bold mb-4">Готовы начать поиск автомобиля?</h2>
                <p class="lead mb-4">
                    Оставьте заявку и получите бесплатную консультацию
                </p>
                <a href="{% url 'main:application_form' %}" class="btn btn-light btn-lg">
                    <i class="fas fa-paper-plane me-2"></i>Оставить заявку
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Yandex Maps Script -->
<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
<script type="text/javascript">
    ymaps.ready(init);
    
    function init() {
        try {
            // Координаты центра Москвы (можно изменить на реальный адрес)
            var myMap = new ymaps.Map("map", {
                center: [55.7558, 37.6176], // Москва
                zoom: 12,
                controls: ['zoomControl', 'fullscreenControl']
            });
            
            // Добавляем метку
            var myPlacemark = new ymaps.Placemark([55.7558, 37.6176], {
                balloonContent: '{% if site_settings %}{{ site_settings.site_name }}{% else %}Автоподбор{% endif %}<br>{% if site_settings.address %}{{ site_settings.address }}{% else %}г. Москва{% endif %}'
            }, {
                preset: 'islands#redDotIcon'
            });
            
            myMap.geoObjects.add(myPlacemark);
            
            // Открываем баллун при клике на метку
            myPlacemark.events.add('click', function () {
                myPlacemark.balloon.open();
            });
        } catch (error) {
            // Если карта не загрузилась, показываем заглушку
            document.getElementById('map').innerHTML = `
                <div class="bg-light d-flex align-items-center justify-content-center" style="height: 400px;">
                    <div class="text-center">
                        <i class="fas fa-map text-primary mb-3" style="font-size: 4rem;"></i>
                        <h5 class="fw-bold">Интерактивная карта</h5>
                        <p class="text-muted">{% if site_settings.address %}{{ site_settings.address }}{% else %}г. Москва{% endif %}</p>
                        <a href="https://yandex.ru/maps/?text={% if site_settings.address %}{{ site_settings.address }}{% else %}г. Москва{% endif %}" target="_blank" class="btn btn-outline-primary">
                            <i class="fas fa-external-link-alt me-1"></i>Открыть в Яндекс Картах
                        </a>
                    </div>
                </div>
            `;
        }
    }
</script>
{% endblock %} 